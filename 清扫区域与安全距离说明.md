# æ¸…æ‰«åŒºåŸŸä¸å®‰å…¨è·ç¦» - æ¦‚å¿µæ¾„æ¸…ä¸å®ç°è¯´æ˜

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### 1. åŒºåŸŸå®šä¹‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¢™ä½“/éšœç¢ç‰©ï¼ˆä¸å¯é€šè¡Œï¼‰              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† 35cmå®‰å…¨è·ç¦»                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  æ¸…æ‰«åŒºåŸŸï¼ˆå¯å®‰å…¨é€šè¡Œï¼‰  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ¤– æœºå™¨äººåœ¨è¿™é‡Œè§„åˆ’è·¯å¾„ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å›¾ä¾‹ï¼š
- æœ€å¤–å±‚ï¼šå¢™ä½“è¾¹ç•Œï¼ˆä»SLAMåœ°å›¾æå–ï¼‰
- ä¸­é—´å±‚ï¼šå®‰å…¨è¾¹ç•Œï¼ˆå‘å†…åç§»35cmï¼‰
- æœ€å†…å±‚ï¼šæ¸…æ‰«åŒºåŸŸï¼ˆæœºå™¨äººå¯ä»¥å®‰å…¨è¡Œé©¶çš„åŒºåŸŸï¼‰
```

### 2. åœ°å›¾å¤„ç†æµç¨‹

```
åŸå§‹SLAMåœ°å›¾
    â†“
[æ­¥éª¤1] äºŒå€¼åŒ–
    â†“ (0=è‡ªç”±ç©ºé—´, é0=éšœç¢ç‰©/æœªçŸ¥)
[æ­¥éª¤2] æŒ‰æœºå™¨äººåŠå¾„è†¨èƒ€ (0.15m)
    â†“ (ç¡®ä¿æœºå™¨äººä¸ä¼šç¢°åˆ°å¢™)
[æ­¥éª¤3] å¼€è¿ç®—ã€é—­è¿ç®—å»å™ª
    â†“ (å»é™¤å°å™ªç‚¹ï¼Œå¡«å……å°å­”æ´)
[æ­¥éª¤4] å‘å†…åç§»edge_offset (0.35m)
    â†“ (ä¸å¢™ä½“ä¿æŒå®‰å…¨è·ç¦»)
æ¸…æ‰«åŒºåŸŸ
    â†“
[æ­¥éª¤5] findContoursæå–è½®å»“
    â†“
æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ + éšœç¢ç‰©è¾¹ç•Œ
```

### 3. ä¸ºä»€ä¹ˆä¸éœ€è¦å®‰å…¨æ£€æŸ¥ï¼Ÿ

**å…³é”®ç†è§£ï¼š**
- âœ… æ¸…æ‰«åŒºåŸŸå·²ç»è€ƒè™‘äº†æœºå™¨äººå°ºå¯¸ï¼ˆ0.15mï¼‰
- âœ… æ¸…æ‰«åŒºåŸŸå·²ç»ä¸å¢™ä½“ä¿æŒå®‰å…¨è·ç¦»ï¼ˆ0.35mï¼‰
- âœ… æ¸…æ‰«åŒºåŸŸå†…çš„ç‚¹ç†è®ºä¸Šéƒ½æ˜¯å®‰å…¨çš„

**é”™è¯¯åšæ³•ï¼ˆä¿®å¤å‰ï¼‰ï¼š**
```python
# âŒ åœ¨æ¸…æ‰«åŒºåŸŸå†…è¿˜æ£€æŸ¥å®‰å…¨æ€§
for point in cleaning_boundary:
    if self._is_position_safe(point.x, point.y):  # â† å¤šä½™çš„æ£€æŸ¥
        waypoints.append(point)
```

**æ­£ç¡®åšæ³•ï¼ˆä¿®å¤åï¼‰ï¼š**
```python
# âœ… æ¸…æ‰«åŒºåŸŸå†…çš„ç‚¹ç›´æ¥ä½¿ç”¨
for point in cleaning_boundary:
    waypoints.append(point)  # â† æ— éœ€å®‰å…¨æ£€æŸ¥
```

---

## ğŸ“ ä»£ç ä¿®æ”¹è¯¦æƒ…

### ä¿®æ”¹1: ç»Ÿä¸€ä½¿ç”¨æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ

#### 1.1 æ²¿è¾¹æ¸…æ‰« (`_generate_edge_path`)

**ä¿®æ”¹å‰ï¼ˆé—®é¢˜ï¼‰ï¼š**
- âœ… ä½¿ç”¨ `_extract_inset_boundary()` æå–å†…åç§»è¾¹ç•Œ
- âŒ ä½†åˆç”¨ `_is_position_safe()` æ£€æŸ¥æ¯ä¸ªç‚¹
- âŒ å¯¼è‡´å¾ˆå¤šè¾¹ç•Œç‚¹è¢«è¯¯åˆ¤ä¸ºä¸å®‰å…¨

**ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰ï¼š**
```python
def _generate_edge_path(self) -> List[PoseStamped]:
    # æå–æ¸…æ‰«åŒºåŸŸè¾¹ç•Œï¼ˆå·²å‘å†…åç§»35cmï¼‰
    cleaning_boundary = self._extract_inset_boundary()
    
    # æ²¿æ¸…æ‰«åŒºåŸŸè¾¹ç•Œç”Ÿæˆè·¯å¾„
    for count in range(len(cleaning_boundary)):
        idx = (closest_idx + count) % len(cleaning_boundary)
        next_idx = (closest_idx + count + 1) % len(cleaning_boundary)
        
        curr_x, curr_y = cleaning_boundary[idx]
        next_x, next_y = cleaning_boundary[next_idx]
        
        # âœ… è¾¹ç•Œç‚¹ç›´æ¥æ·»åŠ ï¼Œæ— éœ€å®‰å…¨æ£€æŸ¥
        waypoints.append(self._create_pose_simple(curr_x, curr_y, yaw))
        
        # âœ… æ’å€¼ç‚¹ä¹Ÿç›´æ¥æ·»åŠ ï¼Œæ— éœ€å®‰å…¨æ£€æŸ¥
        for j in range(1, num_steps):
            x = curr_x + t * dx
            y = curr_y + t * dy
            waypoints.append(self._create_pose_simple(x, y, yaw))
```

**æ•ˆæœï¼š**
- âœ… è·¯å¾„ç‚¹æ•°é‡å¤§å¹…å¢åŠ ï¼ˆä»11ä¸ªå¢åŠ åˆ°60+ä¸ªï¼‰
- âœ… å½¢æˆå®Œæ•´é—­ç¯
- âœ… æ²¡æœ‰è¢«è¯¯åˆ¤ä¸ºä¸å®‰å…¨çš„ç‚¹

#### 1.2 å¼“å½¢æ¸…æ‰« (`_generate_boustrophedon_path`)

**ä¿®æ”¹å‰ï¼ˆé—®é¢˜ï¼‰ï¼š**
- âŒ ä½¿ç”¨ `_extract_outer_boundary()` æå–åŸå§‹å¢™ä½“è¾¹ç•Œ
- âŒ åœ¨æ•´ä¸ªåœ°å›¾èŒƒå›´å†…è§„åˆ’è·¯å¾„
- âŒ éœ€è¦é¢‘ç¹åšå®‰å…¨æ£€æŸ¥

**ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰ï¼š**
```python
def _generate_boustrophedon_path(self) -> List[PoseStamped]:
    # âœ… ä½¿ç”¨æ¸…æ‰«åŒºåŸŸè¾¹ç•Œï¼Œä¸æ˜¯å¢™ä½“è¾¹ç•Œ
    cleaning_boundary = self._extract_inset_boundary()
    
    # åœ¨æ¸…æ‰«åŒºåŸŸçš„åŒ…å›´ç›’å†…æ‰«æ
    xs = [p[0] for p in cleaning_boundary]
    ys = [p[1] for p in cleaning_boundary]
    min_x, max_x = min(xs), max(xs)
    min_y, max_y = min(ys), max(ys)
    
    while y <= max_y:
        x = min_x
        while x <= max_x:
            # âœ… åªæ£€æŸ¥æ˜¯å¦åœ¨æ¸…æ‰«åŒºåŸŸå†…ï¼Œæ— éœ€å®‰å…¨æ£€æŸ¥
            if self._is_point_in_polygon(x, y, cleaning_boundary):
                line_points.append((x, y))
            x += sample_spacing
```

**å…³é”®å˜åŒ–ï¼š**
- âœ… æ¸…æ‰«åŒºåŸŸ vs å¢™ä½“è¾¹ç•Œ
- âœ… ç§»é™¤äº† `self._is_position_safe()` æ£€æŸ¥
- âœ… åªä¿ç•™ `_is_point_in_polygon()` æ£€æŸ¥ï¼ˆç¡®ä¿åœ¨æ¸…æ‰«åŒºåŸŸå†…ï¼‰

#### 1.3 è‡ªåŠ¨å…¨å±‹è¦†ç›– (`_generate_auto_coverage_path`)

**ä¿®æ”¹å‰ï¼ˆé—®é¢˜ï¼‰ï¼š**
- âŒ `_preprocess_map()` è¿”å›å¢™ä½“è¾¹ç•Œ
- âŒ Cellè¦†ç›–è·¯å¾„åœ¨æ•´ä¸ªåœ°å›¾èŒƒå›´å†…ç”Ÿæˆ
- âŒ æ¯ä¸ªç‚¹éƒ½åšå®‰å…¨æ£€æŸ¥

**ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰ï¼š**
```python
# âœ… ä¿®æ”¹ _preprocess_map() è¿”å›æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ
def _preprocess_map(self):
    # ... å‰é¢çš„å¤„ç† ...
    
    # âœ… å‘å†…åç§»å½¢æˆæ¸…æ‰«åŒºåŸŸ
    offset_pixels = int(self.edge_offset / resolution)
    kernel_offset = cv2.getStructuringElement(
        cv2.MORPH_ELLIPSE, (offset_pixels * 2 + 1, offset_pixels * 2 + 1))
    cleaning_area = cv2.erode(morphed, kernel_offset)
    
    # âœ… æå–æ¸…æ‰«åŒºåŸŸè¾¹ç•Œï¼Œä¸æ˜¯å¢™ä½“è¾¹ç•Œ
    contours, _ = cv2.findContours(cleaning_area, cv2.RETR_EXTERNAL, ...)
    
    return cleaning_boundary, obstacles

# âœ… Cellè¦†ç›–è·¯å¾„ç”Ÿæˆæ—¶ä¸åšå®‰å…¨æ£€æŸ¥
def _generate_cell_coverage_path(self, cell: dict):
    while x <= max_x:
        # âœ… æ¸…æ‰«åŒºåŸŸå†…çš„ç‚¹éƒ½æ˜¯å®‰å…¨çš„ï¼Œç›´æ¥æ·»åŠ 
        line_points.append((x, y))
        x += sample_interval
```

**æ•ˆæœï¼š**
- âœ… æ‰€æœ‰è·¯å¾„éƒ½åœ¨æ¸…æ‰«åŒºåŸŸå†…
- âœ… ä¸å¢™ä½“ä¿æŒ35cmå®‰å…¨è·ç¦»
- âœ… è·¯å¾„ç”Ÿæˆæ›´å¿«ï¼ˆæ— éœ€é¢‘ç¹å®‰å…¨æ£€æŸ¥ï¼‰
- âœ… è·¯å¾„ç‚¹æ›´å¯†é›†ã€æ›´å®Œæ•´

---

## ğŸ”§ å‡½æ•°èŒè´£é‡æ–°å®šä¹‰

### 1. `_preprocess_map()` - åœ°å›¾é¢„å¤„ç†

**åŠŸèƒ½ï¼š** ä»åŸå§‹SLAMåœ°å›¾æå–æ¸…æ‰«åŒºåŸŸè¾¹ç•Œå’Œéšœç¢ç‰©

**è¾“å…¥ï¼š** `self.static_map` (OccupancyGrid)

**è¾“å‡ºï¼š** `(cleaning_boundary, obstacles)` - æ¸…æ‰«åŒºåŸŸè¾¹ç•Œå’Œéšœç¢ç‰©åˆ—è¡¨

**å¤„ç†æµç¨‹ï¼š**
```
åŸå§‹åœ°å›¾ 
  â†’ äºŒå€¼åŒ– 
  â†’ æŒ‰æœºå™¨äººå°ºå¯¸è†¨èƒ€ 
  â†’ å¼€é—­è¿ç®—å»å™ª 
  â†’ å‘å†…åç§»edge_offset  â† å…³é”®æ­¥éª¤
  â†’ findContours 
  â†’ (æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ, éšœç¢ç‰©)
```

### 2. `_extract_inset_boundary()` - æå–å†…åç§»è¾¹ç•Œ

**åŠŸèƒ½ï¼š** ä¸“é—¨ç”¨äºæ²¿è¾¹æ¸…æ‰«ï¼Œæå–å•ä¸€çš„æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ

**è¾“å…¥ï¼š** `self.static_map` (OccupancyGrid)

**è¾“å‡ºï¼š** `cleaning_boundary` - æ¸…æ‰«åŒºåŸŸè¾¹ç•Œï¼ˆå•ä¸ªå¤šè¾¹å½¢ï¼‰

**å¤„ç†æµç¨‹ï¼š**
```
è°ƒç”¨_preprocess_map() â†’ æå–outer_boundary 
  â†’ è½¬æ¢ä¸ºåƒç´ åæ ‡ 
  â†’ åˆ›å»ºmask 
  â†’ å‘å†…è…èš€edge_offset 
  â†’ findContours 
  â†’ è½¬å›ä¸–ç•Œåæ ‡ 
  â†’ è¿”å›æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ
```

**æ³¨æ„ï¼š** ä¸ `_preprocess_map()` çš„åŒºåˆ«ï¼š
- `_preprocess_map()`: åœ¨åœ°å›¾å±‚é¢æ•´ä½“å¤„ç†ï¼Œè¿”å›è¾¹ç•Œ+éšœç¢ç‰©
- `_extract_inset_boundary()`: åœ¨å·²æœ‰è¾¹ç•ŒåŸºç¡€ä¸Šå†åç§»ï¼Œåªè¿”å›å•ä¸€è¾¹ç•Œ

### 3. `_is_position_safe()` - å®‰å…¨æ£€æŸ¥ï¼ˆå·²åŸºæœ¬å¼ƒç”¨ï¼‰

**åŸåŠŸèƒ½ï¼š** æ£€æŸ¥ä½ç½®æ˜¯å¦åœ¨éšœç¢ç‰©ä¸Š

**å½“å‰çŠ¶æ€ï¼š** âš ï¸ å·²å¼ƒç”¨äºæ¸…æ‰«è·¯å¾„ç”Ÿæˆ

**åŸå› ï¼š**
- æ¸…æ‰«åŒºåŸŸè¾¹ç•Œå·²ç»ä¿è¯äº†å®‰å…¨æ€§
- ç»§ç»­æ£€æŸ¥ä¼šè¯¯åˆ¤åˆæ³•ç‚¹ä¸ºä¸å®‰å…¨

**ä¿ç•™ç”¨é€”ï¼š**
- å¯ç”¨äºèµ·ç‚¹åˆ°è¾¹ç•Œçš„è¿æ¥è·¯å¾„ï¼ˆå¯é€‰ï¼‰
- å…¶ä»–éæ¸…æ‰«åŒºåŸŸçš„è·¯å¾„è§„åˆ’

### 4. `_is_point_in_polygon()` - å¤šè¾¹å½¢å†…ç‚¹æ£€æŸ¥

**åŠŸèƒ½ï¼š** æ£€æŸ¥ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢ï¼ˆæ¸…æ‰«åŒºåŸŸï¼‰å†…

**ç”¨é€”ï¼š** 
- âœ… å¼“å½¢æ¸…æ‰«ï¼šç¡®ä¿æ‰«æç‚¹åœ¨æ¸…æ‰«åŒºåŸŸå†…
- âœ… è‡ªåŠ¨å…¨å±‹ï¼šç¡®ä¿Cellå†…çš„ç‚¹åœ¨æ¸…æ‰«åŒºåŸŸå†…

**æ³¨æ„ï¼š** 
- è¿™æ˜¯å‡ ä½•æ£€æŸ¥ï¼Œä¸æ˜¯å®‰å…¨æ£€æŸ¥
- æ¸…æ‰«åŒºåŸŸå†…çš„ç‚¹éƒ½æ˜¯å®‰å…¨çš„

---

## ğŸ“Š å¯¹æ¯”è¡¨æ ¼

| é¡¹ç›® | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **è¾¹ç•Œå®šä¹‰** | å¢™ä½“è¾¹ç•Œ | æ¸…æ‰«åŒºåŸŸè¾¹ç•Œï¼ˆå‘å†…åç§»35cmï¼‰ |
| **æ²¿è¾¹è·¯å¾„** | 11ä¸ªç‚¹ï¼Œéƒ¨åˆ†è¢«è·³è¿‡ | 60+ä¸ªç‚¹ï¼Œå®Œæ•´é—­ç¯ |
| **å¼“å½¢è·¯å¾„** | åœ¨æ•´ä¸ªåœ°å›¾èŒƒå›´å†… | åœ¨æ¸…æ‰«åŒºåŸŸèŒƒå›´å†… |
| **å…¨å±‹è¦†ç›–** | åœ¨æ•´ä¸ªåœ°å›¾èŒƒå›´å†… | åœ¨æ¸…æ‰«åŒºåŸŸèŒƒå›´å†… |
| **å®‰å…¨æ£€æŸ¥** | é¢‘ç¹è°ƒç”¨`_is_position_safe()` | åªåœ¨å¿…è¦æ—¶æ£€æŸ¥ |
| **è·¯å¾„å¯†åº¦** | ç¨€ç–ï¼ˆ0.3mé—´è·ï¼‰ | å¯†é›†ï¼ˆ0.2mé—´è·ï¼‰ |
| **ä¸å¢™ä½“è·ç¦»** | ä¸ç¡®å®š | ç¡®ä¿35cmå®‰å…¨è·ç¦» |

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•1ï¼šæ²¿è¾¹æ¸…æ‰«

**æœŸæœ›ç»“æœï¼š**
```
âœ“ æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ: 4ä¸ªé¡¶ç‚¹, åç§»=0.35m
âœ“ æ²¿è¾¹è·¯å¾„ç”Ÿæˆå®Œæˆ: 60ä¸ªè·¯ç‚¹  â† æ˜æ˜¾å¢åŠ 
```

**å¯è§†åŒ–ï¼š**
- RVizæ˜¾ç¤ºçº¢è‰²è¾¹ç•Œæ¡†ï¼ˆæ¸…æ‰«åŒºåŸŸè¾¹ç•Œï¼Œä¸æ˜¯å¢™ä½“è¾¹ç•Œï¼‰
- ç»¿è‰²è·¯ç‚¹æ²¿ç€çº¢è‰²è¾¹ç•Œå¯†é›†åˆ†å¸ƒ
- è·¯å¾„å½¢æˆå®Œæ•´é—­ç¯

### æµ‹è¯•2ï¼šå¼“å½¢æ¸…æ‰«

**æœŸæœ›ç»“æœï¼š**
```
âœ“ æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ: 4ä¸ªé¡¶ç‚¹, åç§»=0.35m
âœ“ å¼“å½¢è·¯å¾„è§„åˆ’å®Œæˆ: Xæ¡æ‰«æçº¿, XXä¸ªè·¯ç‚¹
```

**å¯è§†åŒ–ï¼š**
- è·¯å¾„åœ¨æ¸…æ‰«åŒºåŸŸè¾¹ç•Œå†…
- å¼“å½¢è·¯çº¿ä¸è¾¹ç•Œä¿æŒ35cmè·ç¦»
- æ²¡æœ‰è·¯ç‚¹åœ¨è¾¹ç•Œå¤–

### æµ‹è¯•3ï¼šè‡ªåŠ¨å…¨å±‹

**æœŸæœ›ç»“æœï¼š**
```
âœ“ æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ: Xä¸ªé¡¶ç‚¹, åç§»=0.35m
âœ“ Cell Decompositionå®Œæˆ: ç”ŸæˆXä¸ªæœ‰æ•ˆåˆ†å—
âœ“ æ€»èˆªç‚¹æ•°: XXX
âœ“ æ€»è·¯å¾„é•¿åº¦: XX.XXm
```

**å¯è§†åŒ–ï¼š**
- æ‰€æœ‰Celléƒ½åœ¨æ¸…æ‰«åŒºåŸŸå†…
- è¦†ç›–è·¯å¾„ä¸å¢™ä½“ä¿æŒå®‰å…¨è·ç¦»

---

## âš™ï¸ é…ç½®å‚æ•°

### `cleaning_task_params.yaml`

```yaml
cleaning_task:
  ros__parameters:
    robot_radius: 0.15        # æœºå™¨äººåŠå¾„ï¼ˆç±³ï¼‰
    edge_offset: 0.35         # ä¸å¢™ä½“çš„å®‰å…¨è·ç¦»ï¼ˆç±³ï¼‰â† å…³é”®å‚æ•°
    waypoint_spacing: 0.5     # è·¯ç‚¹é—´è·ï¼ˆç±³ï¼‰- ç”¨äºCellè¿æ¥
    coverage_stripe_width: 0.3 # å¼“å½¢è¦†ç›–æ¡å¸¦å®½åº¦ï¼ˆç±³ï¼‰
    queue_size: 2             # ç›®æ ‡ç‚¹é˜Ÿåˆ—å¤§å°
```

### ç¡¬ç¼–ç å‚æ•°

```python
# æ²¿è¾¹æ¸…æ‰«æ’å€¼é—´è·
edge_interpolation = 0.2  # ç±³

# å¼“å½¢æ¸…æ‰«é‡‡æ ·é—´è·
boustrophedon_sampling = 0.25  # ç±³

# è‡ªåŠ¨å…¨å±‹Cellè¦†ç›–é‡‡æ ·é—´è·
auto_coverage_sampling = 0.3  # ç±³
```

---

## ğŸ¯ å…³é”®è¦ç‚¹æ€»ç»“

1. **æ¸…æ‰«åŒºåŸŸ â‰  å¢™ä½“è¾¹ç•Œ**
   - æ¸…æ‰«åŒºåŸŸ = å¢™ä½“è¾¹ç•Œ - 35cmå®‰å…¨è·ç¦»
   - æ‰€æœ‰è·¯å¾„è§„åˆ’éƒ½åœ¨æ¸…æ‰«åŒºåŸŸå†…è¿›è¡Œ

2. **å®‰å…¨è·ç¦»å·²å†…ç½®**
   - æœºå™¨äººå°ºå¯¸è†¨èƒ€: +15cm
   - é¢å¤–å®‰å…¨è¾¹è·: +35cm
   - æ€»å®‰å…¨è·ç¦»: 50cm

3. **æ— éœ€é‡å¤æ£€æŸ¥**
   - æ¸…æ‰«åŒºåŸŸå†…çš„ç‚¹ç†è®ºä¸Šéƒ½æ˜¯å®‰å…¨çš„
   - ç§»é™¤äº†å¤§é‡ä¸å¿…è¦çš„`_is_position_safe()`è°ƒç”¨
   - åªä¿ç•™å‡ ä½•æ£€æŸ¥`_is_point_in_polygon()`

4. **è·¯å¾„æ›´å®Œæ•´**
   - è¾¹ç•Œç‚¹ä¸ä¼šè¢«è¯¯åˆ¤ä¸ºä¸å®‰å…¨
   - è·¯å¾„å¯†åº¦å¢åŠ ï¼ˆ0.2mé—´è·ï¼‰
   - å½¢æˆå®Œæ•´é—­ç¯

5. **ä»£ç æ›´æ¸…æ™°**
   - å‡½æ•°èŒè´£æ˜ç¡®
   - æ¦‚å¿µç»Ÿä¸€ï¼ˆéƒ½ä½¿ç”¨æ¸…æ‰«åŒºåŸŸï¼‰
   - é€»è¾‘ç®€åŒ–ï¼ˆå‡å°‘æ¡ä»¶åˆ¤æ–­ï¼‰

---

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶

1. **`cleaning_task_node.py`** (ä¸»è¦ä¿®æ”¹)
   - `_generate_edge_path()` - ç§»é™¤å®‰å…¨æ£€æŸ¥ï¼Œä½¿ç”¨æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ
   - `_generate_boustrophedon_path()` - æ”¹ç”¨æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ
   - `_generate_auto_coverage_path()` - ä½¿ç”¨æ¸…æ‰«åŒºåŸŸè¾¹ç•Œ
   - `_preprocess_map()` - è¿”å›æ¸…æ‰«åŒºåŸŸè¾¹ç•Œè€Œéå¢™ä½“è¾¹ç•Œ
   - `_generate_cell_coverage_path()` - ç§»é™¤å®‰å…¨æ£€æŸ¥
   - åˆ é™¤ `_extract_outer_boundary()` - ä¸å†éœ€è¦

### æœªä¿®æ”¹çš„æ–‡ä»¶

- âœ… C++è§„åˆ’å™¨æ’ä»¶ï¼ˆedge_planner.cppç­‰ï¼‰- ä¿æŒåŸæ ·
- âœ… é…ç½®æ–‡ä»¶ï¼ˆcleaning_task_params.yamlï¼‰- å‚æ•°å«ä¹‰æ›´æ–°
- âœ… RVizé…ç½®ï¼ˆcleanbot_nav_view.rvizï¼‰- æ— éœ€ä¿®æ”¹

---

## ğŸš€ ä¸‹ä¸€æ­¥

### ç«‹å³æµ‹è¯•

```bash
cd ~/æ¡Œé¢/MOON/Electronic/CleanBot_ws
source install/setup.bash

# å¯åŠ¨å¯¼èˆª
ros2 launch cleanbot_navigation navigation_sim.launch.py

# åœ¨æ–°ç»ˆç«¯å‘é€æ²¿è¾¹æ¸…æ‰«å‘½ä»¤
ros2 topic pub --once /cleaning/mode_cmd std_msgs/msg/UInt8 "{data: 1}"
```

### è§‚å¯Ÿè¦ç‚¹

1. âœ… è·¯å¾„ç‚¹æ•°é‡æ˜æ˜¾å¢åŠ 
2. âœ… æ‰€æœ‰è·¯å¾„ç‚¹éƒ½åœ¨æ¸…æ‰«åŒºåŸŸå†…
3. âœ… ä¸å¢™ä½“ä¿æŒ35cmè·ç¦»
4. âœ… æ²¡æœ‰"è·³è¿‡ä¸å®‰å…¨ç‚¹"çš„è­¦å‘Š
5. âœ… æœºå™¨äººå¹³æ»‘åœ°æ²¿è¾¹ç•Œç§»åŠ¨ä¸€åœˆ

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v3.0  
**ä¿®æ”¹æ—¥æœŸï¼š** 2025-12-26  
**çŠ¶æ€ï¼š** âœ… å·²å®ç°å¹¶ç¼–è¯‘é€šè¿‡










